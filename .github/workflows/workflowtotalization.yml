name: workflow totalization

on:
  workflow_dispatch:

permissions:
  contents: read

jobs:
  workflowtotalization:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v1
        with:
          version: 12
      - run: npm install @octokit/action
    
      - uses: actions/github-script@v6
        with:
          script: |
            const { Octokit } = require("@octokit/rest");
            const octokit = new Octokit({
              auth: context.github.token
            })
            const workflows = await octokit.request('GET /repos/{owner}/{repo}/actions/workflows', {
              owner: context.github.repository_owner
              repo: context.github.repository
            })
            
            console.log(workflows)
